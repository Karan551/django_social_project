# Model :-

- **A model is the single, definitive source of information about your data. It contains the essential fields and behaviors of the data youâ€™re storing. Generally, each model maps to a single database table.**

- **Each model is a Python class that subclasses** `django.db.models.Model`. 
- **Each attribute of the model represents a database field.**
- **With all of this, Django gives us an automatically-generated database-access API.**
- **For Example:-** ğŸ‘‡
    ```python
    from django.db import models

    class Person(models.Model):
        first_name = models.CharField(max_length=30)
        last_name = models.CharField(max_length=30)
    ```

- `first_name` and `last_name` **are fields of the model. Each field is specified as a class attribute, and each attribute maps to a database column.**
- **Each `class` represent a table in a database.**
- **Each field represents to a database column.**
- An `id` **field is added automatically in a database and this will be primary key By default but we can overwrite this.**
- After Defining a model we have to tell django that we are going to use those models. 
- **To do that type the following in command in terminal,where your server is running**
    ```bash
    python3 manage.py makemigrations
    #  And after this type the following command
    python3 manage.py migrate
    ```
- `python3 manage.py makemigrations` ğŸ‘‰ **This command generates a file inside migrations folder in our app directory or folder.**
  - **For Example :-** ğŸ‘‰ `0001_initial.py`
  - **By Default `django` generate a query for our database.**
- `python3 manage.py migrate` ğŸ‘‰ **This command will apply our query in our database.**
- **Every time when we modify our `models.py` file or database we will have to run those commands so that we can apply our changes into our databases.**


- The above `Person` model would create a database table like this:-
```python
CREATE TABLE myapp_person (
    "id" bigint NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    "first_name" varchar(30) NOT NULL,
    "last_name" varchar(30) NOT NULL
);
```
- **Table name Syntax:-** ğŸ‘‰ `appName_className`
- **For Example :-** ğŸ‘‰ `myapp_person`
- **The name of the table**, `myapp_person`, is **automatically derived from some model metadata but can be overridden.**
------
## Fields :-
- **The most important part of a model â€“ and the only required part of a model â€“ is the list of database fields it defines. Fields are specified by class attributes.**
- **Be careful not to choose field names that conflict with the models API like `clean`, `save`, or `delete`.**
- **For Example:-** ğŸ‘‡
  ```python
    from django.db import models

    class Person(models.Model):
        first_name = models.CharField(max_length=30)
        last_name = models.CharField(max_length=30)
    ```

## Field Types :- 

- Each field in our model should be an instance of the appropriate Field class. Django uses the field class types to determine a few things:
  - **The column type, which tells the database what kind of data to store (e.g. INTEGER, VARCHAR, TEXT).**
  - **The default HTML widget to use when rendering a form field (e.g. `<input type="text">`, `<select>`).**
  - **The minimal validation requirements, used in Djangoâ€™s admin and in automatically-generated forms.**

- **Some Important Fields are :-** ğŸ‘‡ 
1. `CharField()` **:-** ğŸ‘‰&nbsp; **A string field, for small- to large-sized strings.**
     - **The default form widget for this field is a TextInput.**
     - **For large amounts of text,We should use TextField.**
     - **CharField has the following extra arguments:-**
         - `max_length` **:-** ğŸ‘‰&nbsp; Default value is `None`. This will apply **maximum characters** in a table. Like `VARCHAR` **in SQL.**

    - **Syntax :-** ğŸ‘‰ **`CharField(maxlength=None,**options)`**
  
2. `DateField()` **:-** ğŸ‘‰ This field is used to represent a Date in a Database.
    - This field has the following extra arguments:-
    - `auto_now` **:-** ğŸ‘‰ **This parameter is used to when every time the object is saved .**
      - **It is Useful for last modified timestamps.**
      - **Current Date is always used.** 
  
    - `auto_now_add` **:-** ğŸ‘‰ **This parameter is used to automatically set the field to now when the object is first created.**
      - **It is useful for Creation of timestamps.**
    - **Syntax :-** ğŸ‘‰ **`DateField(auto_now=False, auto_now_add=False, ,**options)`**
  
3. `DateTimeField()` **:-** ğŸ‘‰ **This field is similar to the `DateField` except it will also include time also.**
    - **Syntax :-** ğŸ‘‰ **`DateTimeField(auto_now=False, auto_now_add=False, ,**options)`**
  
4. `EmailField()` **:-** ğŸ‘‰  **A CharField that checks that the value is a valid email address using EmailValidator.**
    - **Syntax :-** ğŸ‘‰ `EmailField(max_length=254,**options)`

5. `SlugField()` **:-** ğŸ‘‰ **A slug is a short label for something, containing only letters, numbers, underscores or hyphens. Theyâ€™re generally used in URLs.** Like a CharField We can specify `max_length` if `max_length` is not specified django will use default `max_length` of **50**.
    - **Syntax :-** ğŸ‘‰ `SlugField(max_length=50,**options)`
6. `TextField()` **:-** ğŸ‘‰ A large text field. The **default form widget** for this field is a **Textarea**.
    - If we specify a `max_length` attribute, it will be reflected in the `Textarea` widget of the auto-generated form field.
    - **Syntax :-** ğŸ‘‰ `TextField(**options)`
7. `URLField()` **:-** ğŸ‘‰ **A CharField for a URL, validated by URLValidator.**
    - The default form widget for this field is a URLInput.
    - Like a `CharField` subclasses, `URLField` takes the optional `max_length` argument. If we donâ€™t specify `max_length`, a **default** of **200** is used.
    - **Syntax :-** ğŸ‘‰ `URLField(max_length=200,**options)`

8. `FileField()` **:-** ğŸ‘‰ **A file-upload field.This field has the following optional arguments :-**
    - `upload_to` **:-** ğŸ‘‰ **This attribute provides a way of setting the upload directory and file name.** 
      - **If you are using the default `FileSystemStorage`, the string value will be appended to your `MEDIA_ROOT` path to form the location on the local filesystem where uploaded files will be stored.**
    
    - Using a `FileField` or an `ImageField` we will have to take few steps more :-
      -  In your `settings.py` file, Weâ€™ll need to Define `MEDIA_ROOT` as the **full path** to a **directory where youâ€™d like Django to store uploaded files.** **(For performance, these files are not stored in the database.)** 
      -  Define `MEDIA_URL` as the base public URL of that directory. Make sure that this directory is writable by the web serverâ€™s user account.
      -  **Add the `FileField` or `ImageField` to your model, defining the upload_to option to specify a subdirectory of `MEDIA_ROOT` to use for uploaded files.**
      -  **All that will be stored in your database is a path to the file (relative to `MEDIA_ROOT`). Youâ€™ll most likely want to use the convenience `url` attribute provided by Django.**
  

     - `MEDIA_ROOT` **:-** ğŸ‘‰ **This will abosolute file system path to the directory that will hold `user_uploaded` files.** It's **Default value** is **empty string `' '`** .
     - `MEDIA_URL` **:-** ğŸ‘‰ **URL that handles the media served from `MEDIA_ROOT`, used for managing stored files. It must end in a slash.** It's **Default value** is **empty string `' '`** .
      
      #### â­ &nbsp;Serving files uploaded by a user during development :-
     - **Open Your `settings.py` file and write the Following code :-**
     <p align="center"> <strong> 1st method :- </strong> </p>

     - **Path** ğŸ‘‰ **tweetProject/settings.py** ğŸ‘‡
        ```python
        # This will add in your settings.py file 
        MEDIA_ROOT = BASE_DIR/"media/"

        MEDIA_URL = "/media/"     
        ``` 
      <p align="center"> <strong> 2nd method :- </strong> </p>

      - **Path** ğŸ‘‰ **social_project/settings.py** ğŸ‘‡
  
        ```python
        import os

        # This will add in your settings.py file 
        MEDIA_ROOT = os.path.join(BASE_DIR,"media")

        MEDIA_URL = "/media/"     
        ```
     - **Next Step open your `urls.py` file that is located in your project folder.** And write the following code :-
     - **Path** ğŸ‘‰ **social_project/urls.py** ğŸ‘‡
        ```python
        from django.conf import settings
        from django.conf.urls.static import static

        if settings.DEBUG:
          urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

        ``` 
      - **It used only during development not in production.**

9.  `ImageField()` **:-** ğŸ‘‰ Inherits all attributes and methods from `FileField`, but also validates that the uploaded object is a valid image.


### Realtionship Fields :-

10. `ForeignKey()` **:-** ğŸ‘‰ **`ForeignKey` is used to create a relationship between two models where one model (the "child" model) references another model (the "parent" model).**
    - **A `ForeignKey` field in a Django model means that each instance of the model can be linked to one instance of another model. However, one instance of the referenced model can have multiple instances of the model with the foreign key.**
    - **In simpler terms :-**

        **Many-to-one relationship: Multiple records in the first model (the one with the ForeignKey) can refer to a single record in the second model.**

    - **It defines a many-to-one relationship, where many instances of the child model can be associated with one instance of the parent model.**


    - Syntax :- 
      ```python
      models.ForeignKey(to, on_delete, **options)
      ```
        - `to` :- ğŸ‘‰ **The model that you are linking to (i.e., the model being referenced). This should be the name of another model or an already defined model class.**

        - `on_delete`:-ğŸ‘‰ **Specifies what should happen when the referenced object is deleted. This is a required parameter, and it typically takes values like `CASCADE`, `SET_NULL`, `PROTECT`, etc.**

        - `**options`: **Additional optional parameters (like `null`, `blank`, `related_name`, etc.).**

    

    #### Foreign Key Options :-

      - `on_delete=models.CASCADE` :- ğŸ‘‰ **This means that when the referenced object (e.g., the Author) is deleted, all related Book objects will also be deleted (cascaded).**

      - `null=True`:- ğŸ‘‰ **If you want the foreign key to be optional (i.e., a Book may not have an author), you can set this to True.**

      - `blank=True`: **If you want to allow the field to be left blank in forms (e.g., when creating or updating a book), you can set this to `True`.**

      - `related_name`:- ğŸ‘‰ **You can specify a reverse relation from the Author model back to the Book model. For example, if you wanted to access all the books of an author, you could set <br/> `related_name='books'` on the foreign key. Then, `author.books.all()` would return all the books written by that author.**

    ### For Example :-

    ```python
    from django.db import models

    class Author(models.Model):
      name = models.CharField(max_length=100)

      def __str__(self):
        return self.name


    class Book(models.Model):
      title = models.CharField(max_length=200)
      author = models.ForeignKey(Author, on_delete=models.CASCADE,related_name='books')

      def __str__(self):
        return self.title


    # Now you can access all books of an author following methods
    author = Author.objects.get(id=1)
    books_by_author = author.books.all()


    # In this case, author.books.all() would return all Book instances that have that particular Author.
    ```

    - **The `on_delete` option defines what happens to the child model when the referenced parent model is deleted.**

    #### `on_delete` Options :- 
    - The `on_delete` option controls what happens when the referenced object (the object that the foreign key points to) is deleted. Common values for `on_delete` include:

        1. `models.CASCADE` :- **When the referenced object is deleted, all related objects are also deleted.**

            - **Example: If an Author is deleted, all books related to that author will also be deleted.**

        2. `models.PROTECT` :- **Prevents the deletion of the referenced object if there are any related objects. You can't delete the referenced object until all related objects are deleted or removed.**

            - **Example: If you try to delete an Author who has books associated with them, Django will raise a ProtectedError.**

        3. `models.SET_NULL` :- **Sets the foreign key to `NULL` if the referenced object is deleted (only works if the foreign key field allows `NULL`).**

            - **Example: If you delete an Author, the author field in the Book model will be set to `NULL`.**

        4. `models.SET_DEFAULT` :- **Sets the foreign key to its default value if the referenced object is deleted (if a default is defined).**

            - **Example: If you delete an Author, the author field will be set to a default value.**

        5. `models.SET()`:- **Allows you to specify a custom function or value to set when the referenced object is deleted.**

        6. `models.DO_NOTHING`: **Do nothing when the referenced object is deleted. You are responsible for handling the situation manually.**
      
      - Clicke [Here](https://docs.djangoproject.com/en/5.1/ref/models/fields/#foreignkey) To Know about Relation ship fields 

- There are many other options â€” we can view the full list of field options [here](https://docs.djangoproject.com/en/5.1/ref/models/fields/#field-types).


-----
## Field Options :-

- **Each field takes a certain set of field-specific arguments.**
  - **For example, CharField (and its subclasses) require a `max_length` argument which specifies the size of the `VARCHAR` database field used to store the data.** 
- **Some Important Field Options are :-**
  1. `null` **:-** ğŸ‘‰ &nbsp; **If `True`, Django will store empty values as `NULL` in the database. Default is `False`.** <br/>
       - Avoid using null on string-based fields such as `CharField` and `TextField`. If a string-based field has `null=True`, that means it has two possible values for **â€œno dataâ€: NULL, and the empty string**. In most cases, itâ€™s redundant to have two possible values for â€œno data;â€ the Django convention is to use the empty string, not NULL. One exception is when a CharField has both unique=True and blank=True set. In this situation, null=True is required to avoid unique constraint violations when saving multiple objects with blank values.
        > __Note:-__   This is different than `null`. `null` is purely database-related, whereas blank is validation-related. If a field has blank=True, form validation will allow entry of an empty value. If a field has blank=False, the field will be required.
  2. `blank` **:-** ğŸ‘‰ **If True, the field is allowed to be blank. Default is False.**
  3. `default` **:-** ğŸ‘‰ **The default value for the field. This can be a value or a callable object. If callable it will be called every time a new object is created.**
  4. `help_text` **:-** ğŸ‘‰ **Extra â€œhelpâ€ text to be displayed with the form widget. Itâ€™s useful for documentation even if your field isnâ€™t used on a form.**
  5. `primary key` **:-** ğŸ‘‰**If True, this field is the primary key for the model.**
     - If you donâ€™t specify `primary_key=True` for any fields in your model, Django will automatically add an IntegerField to hold the primary key, so you donâ€™t need to set `primary_key=True` on any of your fields unless you want to override the default primary-key behavior. 
     - **The primary key field is read-only.** If you change the value of the primary key on an existing object and then save it, a new object will be created alongside the old one.
     - [Click Here](https://docs.djangoproject.com/en/5.0/ref/models/fields/#primary-key) For More Information about Primary Key.
      
  6. `unique` **:-** ğŸ‘‰ **If True, this field must be unique throughout the table.**


### Automatic primary key fields:-

- **By default, Django gives each model an auto-incrementing primary key with the type specified per app in `AppConfig.default_auto_field` or globally in the `DEFAULT_AUTO_FIELD` setting.** 
- **If weâ€™d like to specify a custom primary key, specify `primary_key=True` on one of your fields. If Django sees youâ€™ve explicitly set `Field.primary_key`, it wonâ€™t add the automatic id column.**

- **Each model requires exactly one field to have `primary_key=True` (either explicitly declared or automatically added).**


- [Click Here](https://docs.djangoproject.com/en/5.0/ref/models/fields/#common-model-field-options) For More Information About Field Options.

----- 
## Model Meta Options :-

1. `verbose_name` **:-** ğŸ‘‰ **A human-readable name for the object, singular**
   - **For Example :-** ğŸ‘‡
   ```python
   class Meta:
      verbose_name = "pizza"
   ``` 
   - **If this isnâ€™t given, Django will use a munged version of the class name: CamelCase becomes camel case.** 
2. `verbose_name_plural` **:-** ğŸ‘‰ The plural name for the object.
    - **For Example :-** ğŸ‘‡
      ```python
      class Meta:
          verbose_name_plural = "Catgories"
      ```
    -  **If this isnâ€™t given, Django will use verbose_name + "s".**

3. `ordering` **:-** ğŸ‘‰ The default ordering for the object,  when obtained lists of objects.
    - This is a tuple or list of strings and/or query expressions. **Each string is a field name with an optional â€œ-â€ prefix, which indicates descending order. Fields without a leading `â€œ-â€` will be ordered *ascending*. Use the string `â€œ?â€` to order randomly.**
    - **For example, to order by a pub_date field ascending, use this:**
      ```python
      ordering = ["pub_date"]
      ``` 
    - **To order by pub_date descending, use this:**
      ```python
      ordering = ["-pub_date"]
      ``` 
    - **To order by pub_date descending, then by author ascending, use this:**
      ```python
      ordering = ["-pub_date", "author"]
      ```
4. `get_latest_by` **:-** ğŸ‘‰ **The name of a field or a list of field names in the model.**
    - **For Example :-** ğŸ‘‡
        ```python
        # Latest by ascending order_date.
        get_latest_by = "order_date"

        # Latest by priority descending, order_date ascending.
        get_latest_by = ["-priority", "order_date"]
        ```



    
- [Click Here](https://docs.djangoproject.com/en/5.0/ref/models/options/#django.db.models.Options.verbose_name_plural) For More Information about Meta options.
-----
- [Click Here](https://docs.djangoproject.com/en/5.0/topics/db/models/#) For More Information about models.
-----
